(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{1412:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(5155),l=a(2619),n=a.n(l),r=a(7937);function o(e){let{items:t}=e;return(0,s.jsx)("nav",{className:"flex items-center space-x-2 text-sm mb-6",children:t.map((e,a)=>{let l=a===t.length-1;return(0,s.jsxs)("div",{className:"flex items-center",children:[a>0&&(0,s.jsx)(r.A,{className:"w-4 h-4 mx-2 text-gray-500"}),e.href&&!l?(0,s.jsxs)(n(),{href:e.href,className:"flex items-center gap-2 text-purple-400 hover:text-purple-300 transition-colors",children:[e.icon,e.label]}):(0,s.jsxs)("span",{className:"flex items-center gap-2 ".concat(l?"text-gray-300 font-semibold":"text-gray-500"),children:[e.icon,e.label]})]},a)})})}},1712:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},1786:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2529:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3842:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]])},5299:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7621:(e,t,a)=>{"use strict";a.d(t,{BO:()=>d,Dp:()=>o,Zq:()=>r,jp:()=>n,t_:()=>c,vt:()=>i});let s=a(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api";async function l(e){if(!e.ok)throw Error((await e.json().catch(()=>({detail:"Unknown error"}))).detail||"HTTP ".concat(e.status));return e.json()}let n={list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/workspace";return l(await fetch("".concat(s,"/files/list?path=").concat(encodeURIComponent(e))))},upload:async(e,t)=>{let a=new FormData;return a.append("file",e),l(await fetch("".concat(s,"/files/upload?destination=").concat(encodeURIComponent(t)),{method:"POST",body:a}))},delete:async e=>l(await fetch("".concat(s,"/files/delete?path=").concat(encodeURIComponent(e)),{method:"DELETE"})),rename:async(e,t)=>l(await fetch("".concat(s,"/files/rename"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({old_path:e,new_name:t})})),mkdir:async(e,t)=>l(await fetch("".concat(s,"/files/mkdir"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,name:t})})),read:async e=>l(await fetch("".concat(s,"/files/read/").concat(encodeURIComponent(e.substring(1))))),write:async(e,t)=>l(await fetch("".concat(s,"/files/write"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,content:t})}))},r={list:async()=>l(await fetch("".concat(s,"/dataset/list"))),uploadBatch:async(e,t)=>{let a=new FormData;return e.forEach(e=>a.append("files",e)),l(await fetch("".concat(s,"/dataset/upload-batch?dataset_name=").concat(encodeURIComponent(t)),{method:"POST",body:a}))},tag:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wd14-vit-v2",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.35;return l(await fetch("".concat(s,"/dataset/tag"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset_path:e,model:t,threshold:a})}))},create:async e=>l(await fetch("".concat(s,"/dataset/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})})),getImagesWithTags:async e=>l(await fetch("".concat(s,"/dataset/images-with-tags?dataset_path=").concat(encodeURIComponent(e)))),updateTags:async(e,t)=>l(await fetch("".concat(s,"/dataset/update-tags"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_path:e,tags:t})})),bulkTagOperation:async(e,t,a,n)=>l(await fetch("".concat(s,"/dataset/bulk-tag-operation"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset_path:e,operation:t,tags:a,replace_with:n||""})})),injectTriggerWord:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start";return l(await fetch("".concat(s,"/dataset/inject-trigger-word"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset_path:e,trigger_word:t,position:a})}))}},o={start:async e=>l(await fetch("".concat(s,"/training/start"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),stop:async()=>l(await fetch("".concat(s,"/training/stop"),{method:"POST"})),status:async()=>l(await fetch("".concat(s,"/training/status"))),validate:async e=>l(await fetch("".concat(s,"/training/validate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),connectLogs:(e,t)=>{let a=new WebSocket("ws://localhost:8000/api/training/logs");return a.onmessage=t=>{e(JSON.parse(t.data))},t&&(a.onerror=t),a}},i={templates:async()=>l(await fetch("".concat(s,"/config/templates"))),load:async e=>l(await fetch("".concat(s,"/config/load?path=").concat(encodeURIComponent(e)))),save:async(e,t)=>l(await fetch("".concat(s,"/config/save"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,config:t})})),defaults:async()=>l(await fetch("".concat(s,"/config/defaults")))},c={calculateSteps:async e=>l(await fetch("".concat(s,"/utilities/calculator"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),browseDatasets:async()=>l(await fetch("".concat(s,"/utilities/datasets/browse"))),listLoraFiles:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"safetensors",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name";return l(await fetch("".concat(s,"/utilities/lora/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directory:e,file_extension:t,sort_by:a})}))},getResizeDimensions:async()=>l(await fetch("".concat(s,"/utilities/lora/resize-dimensions"))),resizeLora:async(e,t,a,n)=>l(await fetch("".concat(s,"/utilities/lora/resize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input_path:e,output_path:t,new_dim:a,new_alpha:n})})),uploadToHuggingFace:async e=>l(await fetch("".concat(s,"/utilities/hf/upload"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),validateHfToken:async e=>l(await fetch("".concat(s,"/utilities/hf/validate-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hf_token:e})}))},d={download:async(e,t,a)=>l(await fetch("".concat(s,"/models/download"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,download_type:t,model_type:a})})),list:async()=>l(await fetch("".concat(s,"/models/list"))),delete:async(e,t)=>l(await fetch("".concat(s,"/models/").concat(e,"/").concat(encodeURIComponent(t)),{method:"DELETE"})),popular:async()=>l(await fetch("".concat(s,"/models/popular")))}},7937:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8734:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},8874:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},9518:(e,t,a)=>{Promise.resolve().then(a.bind(a,9521))},9521:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var s=a(5155),l=a(2115),n=a(7621),r=a(1712),o=a(3842),i=a(8734);let c=(0,a(1847).A)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var d=a(1786),h=a(5299),m=a(2529),u=a(8874),x=a(1412);function p(){let[e,t]=(0,l.useState)("merge");return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-16",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 max-w-7xl",children:[(0,s.jsx)(x.A,{items:[{label:"Home",href:"/",icon:(0,s.jsx)(r.A,{className:"w-4 h-4"})},{label:"Utilities",icon:(0,s.jsx)(o.A,{className:"w-4 h-4"})}]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-5xl md:text-6xl font-bold mb-4 bg-gradient-to-r from-orange-400 via-red-400 to-orange-400 bg-clip-text text-transparent",children:"LoRA Utilities"}),(0,s.jsx)("p",{className:"text-xl text-gray-300",children:"Merge, optimize, and publish your trained LoRAs"})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("div",{className:"border-b border-slate-700",children:(0,s.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,s.jsxs)("button",{onClick:()=>t("merge"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("merge"===e?"border-cyan-400 text-cyan-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-slate-600"),children:[(0,s.jsx)(i.A,{className:"w-5 h-5 inline mr-2"}),"Merge LoRAs"]}),(0,s.jsxs)("button",{onClick:()=>t("resize"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("resize"===e?"border-cyan-400 text-cyan-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-slate-600"),children:[(0,s.jsx)(c,{className:"w-5 h-5 inline mr-2"}),"Resize LoRA"]}),(0,s.jsxs)("button",{onClick:()=>t("huggingface"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("huggingface"===e?"border-cyan-400 text-cyan-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-slate-600"),children:[(0,s.jsx)(d.A,{className:"w-5 h-5 inline mr-2"}),"HuggingFace Upload"]})]})})}),"merge"===e&&(0,s.jsx)(g,{}),"resize"===e&&(0,s.jsx)(b,{}),"huggingface"===e&&(0,s.jsx)(y,{})]})})}function g(){let[e,t]=(0,l.useState)("lora-to-lora");return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Merge Type"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsx)("button",{onClick:()=>t("lora-to-lora"),className:"p-4 rounded-lg border-2 transition-all ".concat("lora-to-lora"===e?"border-cyan-500 bg-cyan-500/10 text-cyan-400":"border-slate-600 bg-slate-800/30 text-gray-400 hover:border-slate-500"),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(i.A,{className:"w-8 h-8 mx-auto mb-2"}),(0,s.jsx)("h3",{className:"font-semibold",children:"Merge Multiple LoRAs"}),(0,s.jsx)("p",{className:"text-sm mt-1 opacity-80",children:"Combine 2+ LoRAs with custom weights"})]})}),(0,s.jsx)("button",{onClick:()=>t("lora-to-checkpoint"),className:"p-4 rounded-lg border-2 transition-all ".concat("lora-to-checkpoint"===e?"border-cyan-500 bg-cyan-500/10 text-cyan-400":"border-slate-600 bg-slate-800/30 text-gray-400 hover:border-slate-500"),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(d.A,{className:"w-8 h-8 mx-auto mb-2"}),(0,s.jsx)("h3",{className:"font-semibold",children:"Bake LoRA into Model"}),(0,s.jsx)("p",{className:"text-sm mt-1 opacity-80",children:"Merge LoRA into a base checkpoint"})]})})]})]}),(0,s.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"lora-to-lora"===e?"LoRA Merging":"LoRA to Checkpoint"}),(0,s.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-6 text-center",children:[(0,s.jsx)("p",{className:"text-blue-300 mb-2",children:"\uD83D\uDEA7 Coming Soon!"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"lora-to-lora"===e?"Merge multiple LoRAs together with custom weight ratios using Kohya's merge scripts.":"Bake a LoRA into a base model checkpoint for standalone use without needing the LoRA file."}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:"TODO: Add file selection, weight sliders, merge options, and backend API integration."})]})]})]})}function b(){let[e,t]=(0,l.useState)(""),[a,r]=(0,l.useState)(""),[o,i]=(0,l.useState)(32),[d,u]=(0,l.useState)(32),[x,p]=(0,l.useState)([]),[g,b]=(0,l.useState)([16,32,64,128]),[y,f]=(0,l.useState)(!1),[j,N]=(0,l.useState)(null),[w,v]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{let e=await n.t_.listLoraFiles("/workspace/output","safetensors","date");e.success&&(p(e.files),e.files.length>0&&t(e.files[0].path));let a=await n.t_.getResizeDimensions();a.dimensions&&b(a.dimensions)}catch(e){console.error("Failed to load data:",e)}})()},[]),(0,l.useEffect)(()=>{if(e){let t=e.replace(/\.safetensors$/,"");r("".concat(t,"_dim").concat(o,".safetensors"))}},[e,o]);let k=async()=>{if(!e||!a)return void v("Please select an input file and provide an output path");try{f(!0),v(null),N(null);let t=await n.t_.resizeLora(e,a,o,d);t.success?N(t):v(t.error||"Resize failed")}catch(e){v(e.message||"Resize failed")}finally{f(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Resize Configuration"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Input LoRA File *"}),x.length>0?(0,s.jsx)("select",{value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",children:x.map(e=>(0,s.jsxs)("option",{value:e.path,children:[e.name," (",e.size_formatted,")"]},e.path))}):(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",placeholder:"/workspace/output/my_lora.safetensors"})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Dimension (Rank) *"}),(0,s.jsx)("select",{value:o,onChange:e=>i(parseInt(e.target.value)),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",children:g.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Lower = smaller file, less detail"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Alpha *"}),(0,s.jsx)("input",{type:"number",value:d,onChange:e=>u(parseInt(e.target.value)||0),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",min:"1"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Usually same as dimension"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Output Path *"}),(0,s.jsx)("input",{type:"text",value:a,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",placeholder:"/workspace/output/my_lora_dim32.safetensors"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated based on input file and dimension"})]})]}),(0,s.jsxs)("div",{className:"mt-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"\uD83D\uDD27 How Resizing Works"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[(0,s.jsx)("li",{children:"Uses Derrian's enhanced resize script or Kohya's standard script"}),(0,s.jsx)("li",{children:"Reduces file size while preserving quality"}),(0,s.jsx)("li",{children:"Useful for sharing LoRAs or reducing VRAM usage"}),(0,s.jsx)("li",{children:"Original file is not modified"})]})]})]}),(0,s.jsx)("button",{onClick:k,disabled:y||!e||!a,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-4 rounded-lg font-semibold hover:from-purple-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{className:"w-5 h-5 animate-spin"}),"Resizing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c,{className:"w-5 h-5"}),"Resize LoRA"]})}),w&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:w}),j&&j.success&&(0,s.jsxs)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(m.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-semibold",children:"Resize Successful!"})]}),(0,s.jsxs)("div",{className:"text-sm space-y-1",children:[(0,s.jsxs)("div",{children:["Input: ",j.input_path]}),(0,s.jsxs)("div",{children:["Output: ",j.output_path]}),(0,s.jsxs)("div",{children:["Dimension: ",j.new_dim," / Alpha: ",j.new_alpha]}),(0,s.jsx)("div",{className:"mt-2 font-medium",children:j.message})]})]})]})}function y(){let[e,t]=(0,l.useState)("lora"),[a,r]=(0,l.useState)(""),[o,x]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),[b,y]=(0,l.useState)("model"),[f,j]=(0,l.useState)(""),[N,w]=(0,l.useState)("Upload via Ktiseos-Nyx-Trainer \uD83E\uDD17"),[v,k]=(0,l.useState)(!1),[S,C]=(0,l.useState)([]),[A,_]=(0,l.useState)([]),[T,O]=(0,l.useState)(null),[R,L]=(0,l.useState)(!1),[z,P]=(0,l.useState)(null),[D,U]=(0,l.useState)(null),[F,J]=(0,l.useState)("/workspace/datasets");(0,l.useEffect)(()=>{(async()=>{try{if("lora"===e){let e=await n.t_.listLoraFiles("/workspace/output","safetensors","date");e.success&&_(e.files)}else _([])}catch(e){console.error("Failed to load files:",e)}})(),C([])},[e]);let M=async()=>{if(!a.trim())return void O(null);try{let e=await n.t_.validateHfToken(a);O(e.valid),e.valid&&e.username&&x(e.username)}catch(e){O(!1)}},H=async()=>{if(!a||!o||!p||0===S.length)return void U("Please fill in all required fields and select at least one file");try{L(!0),U(null),P(null);let e=await n.t_.uploadToHuggingFace({hf_token:a,owner:o,repo_name:p,repo_type:b,selected_files:S,remote_folder:f,commit_message:N,create_pr:v});e.success?(P(e),C([])):U(e.error||"Upload failed")}catch(e){U(e.message||"Upload failed")}finally{L(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"What would you like to upload?"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsx)("button",{onClick:()=>t("lora"),className:"p-4 rounded-lg border-2 transition-all ".concat("lora"===e?"border-cyan-500 bg-cyan-500/10 text-cyan-400":"border-slate-600 bg-slate-800/30 text-gray-400 hover:border-slate-500"),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c,{className:"w-8 h-8 mx-auto mb-2"}),(0,s.jsx)("h3",{className:"font-semibold",children:"LoRA Models"}),(0,s.jsx)("p",{className:"text-sm mt-1 opacity-80",children:"Upload trained LoRA .safetensors files"})]})}),(0,s.jsx)("button",{onClick:()=>t("dataset"),className:"p-4 rounded-lg border-2 transition-all ".concat("dataset"===e?"border-cyan-500 bg-cyan-500/10 text-cyan-400":"border-slate-600 bg-slate-800/30 text-gray-400 hover:border-slate-500"),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(i.A,{className:"w-8 h-8 mx-auto mb-2"}),(0,s.jsx)("h3",{className:"font-semibold",children:"Datasets"}),(0,s.jsx)("p",{className:"text-sm mt-1 opacity-80",children:"Upload training datasets with images & captions"})]})})]})]}),(0,s.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"HuggingFace Configuration"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"HuggingFace Token (Write Access) *"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"password",value:a,onChange:e=>{r(e.target.value),O(null)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"hf_..."}),(0,s.jsx)("button",{onClick:M,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Validate"})]}),null!==T&&(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm ".concat(T?"text-green-600":"text-red-600"),children:[T?(0,s.jsx)(m.A,{className:"w-4 h-4"}):(0,s.jsx)(u.A,{className:"w-4 h-4"}),T?"Token is valid!":"Invalid token"]}),(0,s.jsxs)("p",{className:"mt-2 text-xs text-gray-500",children:["Get your token at"," ",(0,s.jsx)("a",{href:"https://huggingface.co/settings/tokens",target:"_blank",className:"text-blue-500 hover:underline",children:"huggingface.co/settings/tokens"})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Owner *"}),(0,s.jsx)("input",{type:"text",value:o,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",placeholder:"your-username"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Repository *"}),(0,s.jsx)("input",{type:"text",value:p,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",placeholder:"my-loras"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),(0,s.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",children:[(0,s.jsx)("option",{value:"model",children:"Model"}),(0,s.jsx)("option",{value:"dataset",children:"Dataset"}),(0,s.jsx)("option",{value:"space",children:"Space"})]})]})]}),(0,s.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Remote Folder (Optional)"}),(0,s.jsx)("input",{type:"text",value:f,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",placeholder:"models/v1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Commit Message"}),(0,s.jsx)("textarea",{value:N,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",rows:2})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:v,onChange:e=>k(e.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),(0,s.jsx)("span",{className:"text-sm",children:"Create Pull Request"})]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-lg shadow-lg p-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-white mb-4",children:["Select ","lora"===e?"LoRA Files":"Dataset Files"," (",S.length," selected)"]}),"dataset"===e&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Dataset Directory"}),(0,s.jsx)("input",{type:"text",value:F,onChange:e=>J(e.target.value),className:"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",placeholder:"/workspace/datasets/my-dataset"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Specify the dataset folder to upload (will upload all contents)"})]}),"lora"===e&&0===A.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(i.A,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),(0,s.jsx)("p",{className:"text-gray-400",children:"No LoRA files found"})]}):"dataset"===e?(0,s.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[(0,s.jsxs)("p",{className:"text-sm text-blue-300",children:["\uD83D\uDCC1 Dataset upload will include all files from: ",(0,s.jsx)("span",{className:"font-mono text-cyan-400",children:F})]}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"This includes images, caption files (.txt), and any other files in the directory."})]}):(0,s.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:A.map(e=>(0,s.jsxs)("label",{className:"flex items-start gap-3 p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:S.includes(e.path),onChange:()=>{var t;return t=e.path,void C(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:"mt-1 w-4 h-4 text-blue-600 rounded"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-semibold",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.size_formatted})]})]},e.path))})]}),(0,s.jsx)("button",{onClick:H,disabled:R||0===S.length,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-4 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:R?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{className:"w-5 h-5 animate-spin"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{className:"w-5 h-5"}),"Upload to HuggingFace"]})}),D&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:D}),z&&z.success&&(0,s.jsxs)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(m.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-semibold",children:"Upload Successful!"})]}),(0,s.jsxs)("div",{className:"text-sm space-y-1",children:[(0,s.jsxs)("div",{children:["Repository: ",z.repo_id]}),(0,s.jsxs)("div",{children:["Uploaded: ",z.uploaded_files.length," files"]}),z.failed_files.length>0&&(0,s.jsxs)("div",{className:"text-red-600",children:["Failed: ",z.failed_files.length," files"]})]})]})]})}}},e=>{e.O(0,[297,441,255,358],()=>e(e.s=9518)),_N_E=e.O()}]);