(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{923:(e,a,s)=>{"use strict";s.d(a,{Xi:()=>c,av:()=>d,j7:()=>o,tU:()=>i});var t=s(5155),n=s(2115),r=s(574),l=s(5016);let i=r.bL,o=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(r.B8,{ref:a,className:(0,l.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...n})});o.displayName=r.B8.displayName;let c=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(r.l9,{ref:a,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...n})});c.displayName=r.l9.displayName;let d=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(r.UC,{ref:a,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...n})});d.displayName=r.UC.displayName},3649:(e,a,s)=>{"use strict";s.d(a,{default:()=>d});var t=s(5155),n=s(2115),r=s(7621),l=s(906),i=s(1524),o=s(6154),c=s(6983);function d(){let[e,a]=(0,n.useState)({is_training:!1}),[s,d]=(0,n.useState)([]),[m,h]=(0,n.useState)(!1),p=(0,n.useRef)(null),x=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null==(e=x.current)||e.scrollIntoView({behavior:"smooth"})},[s]),(0,n.useEffect)(()=>{let e=async()=>{try{let e=await r.Dp.status();a(e)}catch(e){console.error("Failed to fetch status:",e)}};e();let s=setInterval(e,2e3);return()=>clearInterval(s)},[]),(0,n.useEffect)(()=>{if(!e.is_training)return;console.log("Connecting to training logs WebSocket...");let s=r.Dp.connectLogs(e=>{console.log("WebSocket message:",e),"log"===e.type?d(a=>[...a,e.message]):"progress"===e.type?a(a=>({...a,progress:e.data})):"connected"===e.type?(h(!0),d(e=>[...e,"âœ“ Connected to training logs"])):"heartbeat"===e.type&&h(!0)},e=>{console.error("WebSocket error:",e),h(!1)});return s.onclose=()=>{console.log("WebSocket closed"),h(!1)},p.current=s,()=>{s.close()}},[e.is_training]);let u=()=>{if(!e.progress)return 0;let{current_step:a,total_steps:s}=e.progress;return a&&s?a/s*100:0};return(0,t.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(l.A,{className:"w-6 h-6 ".concat(e.is_training?"text-green-400 animate-pulse":"text-gray-500")}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Training Monitor"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[m&&(0,t.jsxs)("span",{className:"flex items-center gap-2 text-sm text-green-400",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Live"]}),(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat(e.is_training?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-slate-700/50 text-gray-400 border border-slate-600"),children:e.is_training?"Training":"Idle"})]})]}),e.is_training&&e.progress&&(0,t.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,t.jsxs)("span",{className:"font-medium",children:["Step ",e.progress.current_step||0," / ",e.progress.total_steps||0]}),(0,t.jsxs)("span",{className:"text-gray-600",children:[u().toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-300 relative",style:{width:"".concat(u(),"%")},children:(0,t.jsx)("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[void 0!==e.progress.current_epoch&&(0,t.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-blue-400 mb-1",children:[(0,t.jsx)(i.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"Epoch"})]}),(0,t.jsxs)("div",{className:"text-xl font-bold text-white",children:[e.progress.current_epoch," / ",e.progress.total_epochs||"?"]})]}),void 0!==e.progress.lr&&(0,t.jsxs)("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-purple-400 mb-1",children:[(0,t.jsx)(o.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"Learning Rate"})]}),(0,t.jsx)("div",{className:"text-xl font-bold text-white",children:e.progress.lr.toExponential(2)})]}),void 0!==e.progress.loss&&(0,t.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-400 mb-1",children:[(0,t.jsx)(l.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"Loss"})]}),(0,t.jsx)("div",{className:"text-xl font-bold text-white",children:e.progress.loss.toFixed(4)})]}),(0,t.jsxs)("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-orange-400 mb-1",children:[(0,t.jsx)(c.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"ETA"})]}),(0,t.jsx)("div",{className:"text-xl font-bold text-white",children:(()=>{if(!e.progress)return"Calculating...";let{current_step:a,total_steps:s}=e.progress;if(!a||!s)return"Unknown";let t=Math.ceil(.1*(s-a));if(t<60)return"~".concat(t,"m");let n=Math.floor(t/60);return"~".concat(n,"h ").concat(t%60,"m")})()})]})]})]}),(0,t.jsxs)("div",{className:"border border-slate-600 rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-slate-800 px-4 py-2 border-b border-slate-600",children:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-300",children:["Training Logs ",m&&(0,t.jsx)("span",{className:"text-green-400",children:"(Live)"})]})}),(0,t.jsx)("div",{className:"bg-slate-950 p-4 font-mono text-sm text-green-400 h-96 overflow-y-auto",children:0===s.length?(0,t.jsx)("div",{className:"text-gray-500 text-center py-8",children:e.is_training?"Waiting for logs...":"Start training to see logs here"}):(0,t.jsxs)("div",{className:"space-y-1",children:[s.map((e,a)=>(0,t.jsx)("div",{className:"hover:bg-slate-900/50 px-2 py-1 rounded",children:e},a)),(0,t.jsx)("div",{ref:x})]})})]}),!e.is_training&&0===s.length&&(0,t.jsx)("div",{className:"mt-4 text-center text-sm text-gray-400",children:(0,t.jsx)("p",{children:"WebSocket-based real-time updates"})})]})}},3731:(e,a,s)=>{"use strict";s.d(a,{default:()=>eo});var t=s(5155),n=s(2115),r=s(7621),l=s(6132),i=s(8734),o=s(647),c=s(5921),d=s(6046),m=s(923),h=s(5016);let p=n.forwardRef((e,a)=>{let{className:s,type:n,...r}=e;return(0,t.jsx)("input",{type:n,className:(0,h.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r})});p.displayName="Input";var x=s(2894),u=s(3101);let _=(0,u.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),g=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(x.b,{ref:a,className:(0,h.cn)(_(),s),...n})});g.displayName=x.b.displayName;var v=s(7003);let j=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,h.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...n})});j.displayName="Card";let f=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,h.cn)("flex flex-col space-y-1.5 p-6",s),...n})});f.displayName="CardHeader";let y=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,h.cn)("font-semibold leading-none tracking-tight",s),...n})});y.displayName="CardTitle";let N=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,h.cn)("text-sm text-muted-foreground",s),...n})});N.displayName="CardDescription";let b=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,h.cn)("p-6 pt-0",s),...n})});b.displayName="CardContent",n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,h.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter";var w=s(1432),k=s(1719);let C=w.bL;w.YJ;let F=w.WT,S=n.forwardRef((e,a)=>{let{className:s,children:n,...r}=e;return(0,t.jsxs)(w.l9,{ref:a,className:(0,h.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[n,(0,t.jsx)(w.In,{asChild:!0,children:(0,t.jsx)(k.D3D,{className:"h-4 w-4 opacity-50"})})]})});S.displayName=w.l9.displayName;let T=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(w.PP,{ref:a,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,t.jsx)(k.Mtm,{className:"h-4 w-4"})})});T.displayName=w.PP.displayName;let L=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(w.wn,{ref:a,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,t.jsx)(k.D3D,{className:"h-4 w-4"})})});L.displayName=w.wn.displayName;let R=n.forwardRef((e,a)=>{let{className:s,children:n,position:r="popper",...l}=e;return(0,t.jsx)(w.ZL,{children:(0,t.jsxs)(w.UC,{ref:a,className:(0,h.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...l,children:[(0,t.jsx)(T,{}),(0,t.jsx)(w.LM,{className:(0,h.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,t.jsx)(L,{})]})})});R.displayName=w.UC.displayName,n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(w.JU,{ref:a,className:(0,h.cn)("px-2 py-1.5 text-sm font-semibold",s),...n})}).displayName=w.JU.displayName;let z=n.forwardRef((e,a)=>{let{className:s,children:n,...r}=e;return(0,t.jsxs)(w.q7,{ref:a,className:(0,h.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,t.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(w.VF,{children:(0,t.jsx)(k.Srz,{className:"h-4 w-4"})})}),(0,t.jsx)(w.p4,{children:n})]})});z.displayName=w.q7.displayName,n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(w.wv,{ref:a,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",s),...n})}).displayName=w.wv.displayName;var D=s(8162);let A=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(D.bL,{ref:a,className:(0,h.cn)("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...n,children:(0,t.jsx)(D.C1,{className:(0,h.cn)("grid place-content-center text-current"),children:(0,t.jsx)(k.Srz,{className:"h-4 w-4"})})})});A.displayName=D.bL.displayName;let P=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("textarea",{className:(0,h.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...n})});P.displayName="Textarea";let I=(0,u.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),O=n.forwardRef((e,a)=>{let{className:s,variant:n,...r}=e;return(0,t.jsx)("div",{ref:a,role:"alert",className:(0,h.cn)(I({variant:n}),s),...r})});O.displayName="Alert";let E=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("h5",{ref:a,className:(0,h.cn)("mb-1 font-medium leading-none tracking-tight",s),...n})});E.displayName="AlertTitle";let M=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,h.cn)("text-sm [&_p]:leading-relaxed",s),...n})});M.displayName="AlertDescription";var V=s(3409);let B=V.bL;V.l9;let W=V.ZL;V.bm;let J=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(V.hJ,{ref:a,className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n})});J.displayName=V.hJ.displayName;let U=n.forwardRef((e,a)=>{let{className:s,children:n,...r}=e;return(0,t.jsxs)(W,{children:[(0,t.jsx)(J,{}),(0,t.jsxs)(V.UC,{ref:a,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[n,(0,t.jsxs)(V.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(k.MKb,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});U.displayName=V.UC.displayName;let X=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};X.displayName="DialogHeader";let G=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};G.displayName="DialogFooter";let $=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(V.hE,{ref:a,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight",s),...n})});$.displayName=V.hE.displayName;let H=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(V.VY,{ref:a,className:(0,h.cn)("text-sm text-muted-foreground",s),...n})});H.displayName=V.VY.displayName;var K=s(1763),q=s(7005),Y=s(9953),Z=s(8293),Q=s(3945);function ee(e){let{className:a,children:s,orientation:n,...r}=e;return(0,t.jsxs)(K.V,{className:"min-h-0",...r,children:[(0,t.jsx)(q.B,{"data-slot":"scroll-area-viewport",className:(0,h.cn)("size-full overscroll-contain rounded-[inherit] transition-[box-shadow] outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1 focus-visible:ring-offset-background",a),children:s}),"both"===n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ea,{orientation:"vertical"}),(0,t.jsx)(ea,{orientation:"horizontal"})]}):(0,t.jsx)(ea,{orientation:n}),(0,t.jsx)(Y.I,{"data-slot":"scroll-area-corner"})]})}function ea(e){let{className:a,orientation:s="vertical",...n}=e;return(0,t.jsx)(Z.V,{"data-slot":"scroll-area-scrollbar",orientation:s,className:(0,h.cn)("m-0.5 flex opacity-0 transition-opacity delay-300 data-hovering:opacity-100 data-hovering:delay-0 data-hovering:duration-100 data-scrolling:opacity-100 data-scrolling:delay-0 data-scrolling:duration-100 data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:flex-col data-[orientation=vertical]:w-1.5",a),...n,children:(0,t.jsx)(Q.l,{"data-slot":"scroll-area-thumb",className:"relative flex-1 rounded-full bg-foreground/20"})})}var es=s(1712),et=s(5626),en=s(9847),er=s(2001),el=s(5917);function ei(e){let{open:a,onOpenChange:s,onSelect:l,mode:i,title:o="Select Path",description:c="Browse and select a path",startPath:d="/workspace",fileFilter:m}=e,[h,x]=(0,n.useState)(d),[u,_]=(0,n.useState)(null),[g,j]=(0,n.useState)(!1),[f,y]=(0,n.useState)(null),[N,b]=(0,n.useState)(null),w=async e=>{try{j(!0),y(null);let a=await r.jp.list(e);_(a),x(a.path),b(null)}catch(e){y(e instanceof Error?e.message:"Failed to load directory"),console.error("Failed to load directory:",e)}finally{j(!1)}};(0,n.useEffect)(()=>{a&&w(d)},[a,d]);let k=(null==u?void 0:u.files.filter(e=>"dir"===e.type||!m||m(e)))||[];return(0,t.jsx)(B,{open:a,onOpenChange:s,children:(0,t.jsxs)(U,{className:"max-w-3xl max-h-[80vh]",children:[(0,t.jsxs)(X,{children:[(0,t.jsx)($,{children:o}),(0,t.jsx)(H,{children:c})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.$,{variant:"outline",size:"sm",onClick:()=>{w(d)},disabled:g,children:(0,t.jsx)(es.A,{className:"w-4 h-4"})}),(0,t.jsx)(v.$,{variant:"outline",size:"sm",onClick:()=>{(null==u?void 0:u.parent)&&w(u.parent)},disabled:g||!(null==u?void 0:u.parent),children:(0,t.jsx)(et.A,{className:"w-4 h-4"})}),(0,t.jsx)(p,{value:h,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&w(h)},className:"flex-1",placeholder:"/workspace/path"}),(0,t.jsx)(v.$,{variant:"outline",size:"sm",onClick:()=>w(h),disabled:g,children:"Go"})]}),f&&(0,t.jsx)("div",{className:"text-sm text-red-500 bg-red-50 border border-red-200 rounded p-3",children:f}),(0,t.jsx)(ee,{className:"h-[400px] border rounded",children:g?(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Loading..."}):0===k.length?(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No items found"}):(0,t.jsx)("div",{className:"p-2 space-y-1",children:k.map(e=>(0,t.jsxs)("div",{onClick:()=>{"dir"===e.type?w(e.path):"file"===i&&b(e.path)},onDoubleClick:()=>{"dir"===e.type&&"directory"===i?(l(e.path),s(!1)):"file"===e.type&&"file"===i&&(l(e.path),s(!1))},className:"\n                      flex items-center gap-3 p-2 rounded cursor-pointer\n                      hover:bg-gray-100 transition-colors\n                      ".concat(N===e.path?"bg-blue-50 border border-blue-200":"","\n                    "),children:["dir"===e.type?(0,t.jsx)(en.A,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}):(0,t.jsx)(er.A,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),(0,t.jsx)("span",{className:"flex-1 truncate",children:e.name}),"file"===e.type&&(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:[(e.size/1024/1024).toFixed(2)," MB"]})]},e.path))})}),"directory"===i&&(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Current directory: ",(0,t.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:h})]}),"file"===i&&N&&(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Selected: ",(0,t.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:N})]})]}),(0,t.jsxs)(G,{children:[(0,t.jsx)(v.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,t.jsxs)(v.$,{onClick:()=>{"directory"===i?l(h):N&&l(N),s(!1)},disabled:"file"===i&&!N,children:[(0,t.jsx)(el.A,{className:"w-4 h-4 mr-2"}),"Select ","directory"===i?"Directory":"File"]})]})]})})}function eo(){let[e,a]=(0,n.useState)({project_name:"my_lora",model_type:"SDXL",pretrained_model_name_or_path:"stabilityai/stable-diffusion-xl-base-1.0",vae_path:"",clip_l_path:"",clip_g_path:"",t5xxl_path:"",continue_from_lora:"",wandb_key:"",train_data_dir:"/workspace/datasets/my_dataset",output_dir:"/workspace/output/my_lora",resolution:1024,num_repeats:10,max_train_epochs:10,max_train_steps:0,train_batch_size:4,seed:42,flip_aug:!1,random_crop:!1,shuffle_caption:!0,unet_lr:5e-4,text_encoder_lr:1e-4,lr_scheduler:"cosine",lr_scheduler_number:3,lr_warmup_ratio:.05,lr_warmup_steps:0,lr_power:1,lora_type:"LoRA",network_module:"networks.lora",network_dim:16,network_alpha:8,conv_dim:16,conv_alpha:8,network_dropout:0,dim_from_weights:!1,factor:-1,train_norm:!1,optimizer_type:"AdamW8bit",gradient_accumulation_steps:1,max_grad_norm:1,optimizer_args:"",keep_tokens:0,clip_skip:2,caption_dropout_rate:0,caption_tag_dropout_rate:0,caption_dropout_every_n_epochs:0,keep_tokens_separator:"",secondary_separator:"",enable_wildcard:!1,enable_bucket:!0,sdxl_bucket_optimization:!1,min_bucket_reso:256,max_bucket_reso:2048,bucket_no_upscale:!1,min_snr_gamma_enabled:!0,min_snr_gamma:5,ip_noise_gamma_enabled:!1,ip_noise_gamma:.05,multinoise:!1,multires_noise_discount:.25,noise_offset:0,adaptive_noise_scale:0,zero_terminal_snr:!1,gradient_checkpointing:!0,mixed_precision:"fp16",full_fp16:!1,vae_batch_size:1,no_half_vae:!1,cache_latents:!1,cache_latents_to_disk:!1,cache_text_encoder_outputs:!1,save_every_n_epochs:1,save_every_n_steps:0,save_last_n_epochs:0,save_last_n_epochs_state:0,save_model_as:"safetensors",save_precision:"fp16",output_name:"",no_metadata:!1,sample_every_n_epochs:0,sample_every_n_steps:0,sample_prompts:"",sample_sampler:"euler_a",logging_dir:"",log_with:"",log_prefix:""}),[s,h]=(0,n.useState)([]),[x,u]=(0,n.useState)(!1),[_,w]=(0,n.useState)(null),[k,T]=(0,n.useState)(null),[L,D]=(0,n.useState)([]),[I,V]=(0,n.useState)({field:null,mode:"directory",title:"",description:""}),[B,W]=(0,n.useState)({images:0,repeats:0,total_steps:0,loading:!1});(0,n.useEffect)(()=>{(async()=>{try{let e=await r.vt.templates();h(e.templates||[])}catch(e){console.error("Failed to load templates:",e)}})()},[]),(0,n.useEffect)(()=>{(async()=>{try{let e=await r.vt.defaults();a(a=>({...a,...e}))}catch(e){console.error("Failed to load defaults:",e)}})()},[]),(0,n.useEffect)(()=>{let a=setTimeout(async()=>{try{let a=await r.Dp.validate(e);D(a.warnings||[])}catch(e){console.error("Validation error:",e)}},500);return()=>clearTimeout(a)},[e]),(0,n.useEffect)(()=>{let a=setTimeout(async()=>{if(e.train_data_dir)try{W(e=>({...e,loading:!0}));let a=await r.t_.calculateSteps({dataset_path:e.train_data_dir,epochs:e.max_train_epochs||10,batch_size:e.train_batch_size||4});W({images:a.images,repeats:a.repeats,total_steps:a.total_steps,loading:!1})}catch(e){console.error("Step calculation error:",e),W({images:0,repeats:0,total_steps:0,loading:!1})}},500);return()=>clearTimeout(a)},[e.train_data_dir,e.max_train_epochs,e.train_batch_size,e.num_repeats]);let J=(e,s)=>{a(a=>({...a,[e]:s}))},U=(e,a,s,t)=>{V({field:e,mode:a,title:s,description:t})},X=async e=>{try{u(!0);let s=await r.vt.load(e);a(e=>({...e,...s.config})),T("Template loaded!"),setTimeout(()=>T(null),3e3)}catch(e){w("Failed to load template: ".concat(e))}finally{u(!1)}},G=async()=>{try{u(!0),w(null),await r.vt.save(e.project_name||"my_lora",e),T("Configuration saved!"),setTimeout(()=>T(null),3e3)}catch(e){w("Failed to save: ".concat(e))}finally{u(!1)}},$=async()=>{try{u(!0),w(null);let a=await r.Dp.start(e);T("Training started! ID: ".concat(a.training_id)),a.warnings&&a.warnings.length>0&&D(a.warnings)}catch(e){w("Failed to start training: ".concat(e))}finally{u(!1)}};return(0,t.jsxs)(j,{className:"w-full",children:[(0,t.jsxs)(f,{children:[(0,t.jsx)(y,{children:"Training Configuration"}),(0,t.jsx)(N,{children:"Configure your LoRA training parameters"})]}),(0,t.jsxs)(b,{className:"space-y-6",children:[_&&(0,t.jsxs)(O,{variant:"destructive",children:[(0,t.jsx)(l.A,{className:"h-4 w-4"}),(0,t.jsx)(E,{children:"Error"}),(0,t.jsx)(M,{children:_})]}),k&&(0,t.jsxs)(O,{children:[(0,t.jsx)(E,{children:"Success"}),(0,t.jsx)(M,{children:k})]}),L.length>0&&(0,t.jsxs)(O,{children:[(0,t.jsx)(l.A,{className:"h-4 w-4"}),(0,t.jsx)(E,{children:"Configuration Warnings"}),(0,t.jsx)(M,{children:(0,t.jsx)("ul",{className:"list-disc list-inside space-y-1 mt-2",children:L.map((e,a)=>(0,t.jsx)("li",{children:e},a))})})]}),s.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{children:"Load Template"}),(0,t.jsxs)(C,{onValueChange:X,children:[(0,t.jsx)(S,{children:(0,t.jsx)(F,{placeholder:"Select a template"})}),(0,t.jsx)(R,{children:s.map(e=>(0,t.jsxs)(z,{value:e.path,children:[e.name," - ",e.description]},e.path))})]})]}),(0,t.jsxs)(m.tU,{defaultValue:"setup",className:"w-full",children:[(0,t.jsxs)(m.j7,{className:"grid w-full grid-cols-7",children:[(0,t.jsx)(m.Xi,{value:"setup",children:"Setup"}),(0,t.jsx)(m.Xi,{value:"dataset",children:"Dataset"}),(0,t.jsx)(m.Xi,{value:"lora",children:"LoRA"}),(0,t.jsx)(m.Xi,{value:"learning",children:"Learning Rate"}),(0,t.jsx)(m.Xi,{value:"advanced",children:"Advanced"}),(0,t.jsx)(m.Xi,{value:"saving",children:"Saving"}),(0,t.jsx)(m.Xi,{value:"logging",children:"Logging"})]}),(0,t.jsxs)(m.av,{value:"setup",className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Project & Model Setup"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"project_name",children:"Project Name *"}),(0,t.jsx)(p,{id:"project_name",value:e.project_name,onChange:e=>J("project_name",e.target.value),placeholder:"my_awesome_lora"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"model_type",children:"Model Type *"}),(0,t.jsxs)(C,{value:e.model_type,onValueChange:e=>J("model_type",e),children:[(0,t.jsx)(S,{id:"model_type",children:(0,t.jsx)(F,{})}),(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{value:"SD1.5",children:"SD 1.5"}),(0,t.jsx)(z,{value:"SDXL",children:"SDXL"}),(0,t.jsx)(z,{value:"Flux",children:"Flux"}),(0,t.jsx)(z,{value:"SD3",children:"SD3"})]})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)(g,{htmlFor:"base_model",children:"Base Model Path *"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(p,{id:"base_model",value:e.pretrained_model_name_or_path,onChange:e=>J("pretrained_model_name_or_path",e.target.value),placeholder:"stabilityai/stable-diffusion-xl-base-1.0 or /path/to/model",className:"flex-1"}),(0,t.jsx)(v.$,{type:"button",variant:"outline",size:"icon",onClick:()=>U("pretrained_model_name_or_path","file","Select Base Model","Choose a model file (.safetensors or .ckpt) or enter a HuggingFace model ID"),children:(0,t.jsx)(i.A,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"vae_path",children:"VAE Path (optional)"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(p,{id:"vae_path",value:e.vae_path,onChange:e=>J("vae_path",e.target.value),placeholder:"/path/to/vae.safetensors",className:"flex-1"}),(0,t.jsx)(v.$,{type:"button",variant:"outline",size:"icon",onClick:()=>U("vae_path","file","Select VAE File","Choose a VAE file (.safetensors or .ckpt)"),children:(0,t.jsx)(i.A,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"continue_from_lora",children:"Continue from LoRA (optional)"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(p,{id:"continue_from_lora",value:e.continue_from_lora,onChange:e=>J("continue_from_lora",e.target.value),placeholder:"/path/to/existing_lora.safetensors",className:"flex-1"}),(0,t.jsx)(v.$,{type:"button",variant:"outline",size:"icon",onClick:()=>U("continue_from_lora","file","Select Existing LoRA","Choose a LoRA file to continue training from"),children:(0,t.jsx)(i.A,{className:"w-4 h-4"})})]})]})]}),("Flux"===e.model_type||"SD3"===e.model_type)&&(0,t.jsxs)("div",{className:"border-t pt-4 space-y-4",children:[(0,t.jsx)("h4",{className:"text-md font-medium",children:"Flux/SD3 Text Encoder Paths"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"clip_l_path",children:"CLIP-L Path"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(p,{id:"clip_l_path",value:e.clip_l_path,onChange:e=>J("clip_l_path",e.target.value),className:"flex-1"}),(0,t.jsx)(v.$,{type:"button",variant:"outline",size:"icon",onClick:()=>U("clip_l_path","file","Select CLIP-L File","Choose the CLIP-L text encoder file"),children:(0,t.jsx)(i.A,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"clip_g_path",children:"CLIP-G Path"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(p,{id:"clip_g_path",value:e.clip_g_path,onChange:e=>J("clip_g_path",e.target.value),className:"flex-1"}),(0,t.jsx)(v.$,{type:"button",variant:"outline",size:"icon",onClick:()=>U("clip_g_path","file","Select CLIP-G File","Choose the CLIP-G text encoder file"),children:(0,t.jsx)(i.A,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)(g,{htmlFor:"t5xxl_path",children:"T5XXL Path"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(p,{id:"t5xxl_path",value:e.t5xxl_path,onChange:e=>J("t5xxl_path",e.target.value),className:"flex-1"}),(0,t.jsx)(v.$,{type:"button",variant:"outline",size:"icon",onClick:()=>U("t5xxl_path","file","Select T5XXL File","Choose the T5XXL text encoder file"),children:(0,t.jsx)(i.A,{className:"w-4 h-4"})})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"wandb_key",children:"WandB API Key (optional)"}),(0,t.jsx)(p,{id:"wandb_key",type:"password",value:e.wandb_key,onChange:e=>J("wandb_key",e.target.value),placeholder:"Your WandB API key for logging"})]})]}),(0,t.jsxs)(m.av,{value:"dataset",className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Dataset & Training"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)(g,{htmlFor:"train_data_dir",children:"Dataset Directory *"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(p,{id:"train_data_dir",value:e.train_data_dir,onChange:e=>J("train_data_dir",e.target.value),placeholder:"/workspace/datasets/my_dataset",className:"flex-1"}),(0,t.jsx)(v.$,{type:"button",variant:"outline",size:"icon",onClick:()=>U("train_data_dir","directory","Select Dataset Directory","Choose the directory containing your training images"),children:(0,t.jsx)(i.A,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)(g,{htmlFor:"output_dir",children:"Output Directory *"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(p,{id:"output_dir",value:e.output_dir,onChange:e=>J("output_dir",e.target.value),placeholder:"/workspace/output/my_lora",className:"flex-1"}),(0,t.jsx)(v.$,{type:"button",variant:"outline",size:"icon",onClick:()=>U("output_dir","directory","Select Output Directory","Choose where to save your trained LoRA models"),children:(0,t.jsx)(i.A,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"resolution",children:"Resolution"}),(0,t.jsxs)(C,{value:String(e.resolution),onValueChange:e=>J("resolution",parseInt(e)),children:[(0,t.jsx)(S,{id:"resolution",children:(0,t.jsx)(F,{})}),(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{value:"512",children:"512 (SD 1.5)"}),(0,t.jsx)(z,{value:"768",children:"768"}),(0,t.jsx)(z,{value:"1024",children:"1024 (SDXL)"}),(0,t.jsx)(z,{value:"2048",children:"2048"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"num_repeats",children:"Num Repeats (CRITICAL for Kohya!)"}),(0,t.jsx)(p,{id:"num_repeats",type:"number",value:e.num_repeats,onChange:e=>J("num_repeats",parseInt(e.target.value)),min:"1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"max_train_epochs",children:"Max Train Epochs"}),(0,t.jsx)(p,{id:"max_train_epochs",type:"number",value:e.max_train_epochs,onChange:e=>J("max_train_epochs",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"max_train_steps",children:"Max Train Steps (0 = use epochs)"}),(0,t.jsx)(p,{id:"max_train_steps",type:"number",value:e.max_train_steps,onChange:e=>J("max_train_steps",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"train_batch_size",children:"Batch Size"}),(0,t.jsx)(p,{id:"train_batch_size",type:"number",value:e.train_batch_size,onChange:e=>J("train_batch_size",parseInt(e.target.value)),min:"1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"seed",children:"Seed"}),(0,t.jsx)(p,{id:"seed",type:"number",value:e.seed,onChange:e=>J("seed",parseInt(e.target.value))})]})]}),(0,t.jsx)("div",{className:"border-t pt-4",children:(0,t.jsxs)("div",{className:"bg-gradient-to-br from-cyan-500/10 to-purple-500/10 border-2 border-cyan-400/30 rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)(o.A,{className:"w-6 h-6 text-cyan-400"}),(0,t.jsx)("h4",{className:"text-lg font-bold text-white",children:"Training Steps Calculator"})]}),B.loading?(0,t.jsx)("div",{className:"text-center text-gray-400 py-4",children:"Calculating steps..."}):B.total_steps>0?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl font-bold text-cyan-400 mb-2",children:B.total_steps.toLocaleString()}),(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Total Training Steps"})]}),(0,t.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 font-mono text-sm text-center",children:[(0,t.jsxs)("div",{className:"text-gray-300",children:[B.images," images \xd7 ",e.num_repeats||B.repeats," repeats \xd7 ",e.max_train_epochs||10," epochs"]}),(0,t.jsxs)("div",{className:"text-gray-400 text-xs mt-1",children:["\xf7 ",e.train_batch_size||4," batch size = ",B.total_steps," steps"]})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 text-center",children:"\uD83D\uDCA1 This calculation updates automatically when you change dataset, epochs, or batch size"})]}):(0,t.jsx)("div",{className:"text-center text-gray-500 py-4",children:"Enter a dataset directory to calculate training steps"})]})}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[(0,t.jsx)("h4",{className:"text-md font-medium",children:"Data Augmentation"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"flip_aug",checked:e.flip_aug,onCheckedChange:e=>J("flip_aug",e)}),(0,t.jsx)(g,{htmlFor:"flip_aug",className:"font-normal",children:"Flip Augmentation (horizontal flip)"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"random_crop",checked:e.random_crop,onCheckedChange:e=>J("random_crop",e)}),(0,t.jsx)(g,{htmlFor:"random_crop",className:"font-normal",children:"Random Crop"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"shuffle_caption",checked:e.shuffle_caption,onCheckedChange:e=>J("shuffle_caption",e)}),(0,t.jsx)(g,{htmlFor:"shuffle_caption",className:"font-normal",children:"Shuffle Caption Tags"})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[(0,t.jsx)("h4",{className:"text-md font-medium",children:"Bucketing"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"enable_bucket",checked:e.enable_bucket,onCheckedChange:e=>J("enable_bucket",e)}),(0,t.jsx)(g,{htmlFor:"enable_bucket",className:"font-normal",children:"Enable Bucketing"})]}),e.enable_bucket&&(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 ml-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"min_bucket_reso",children:"Min Bucket Resolution"}),(0,t.jsx)(p,{id:"min_bucket_reso",type:"number",value:e.min_bucket_reso,onChange:e=>J("min_bucket_reso",parseInt(e.target.value))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"max_bucket_reso",children:"Max Bucket Resolution"}),(0,t.jsx)(p,{id:"max_bucket_reso",type:"number",value:e.max_bucket_reso,onChange:e=>J("max_bucket_reso",parseInt(e.target.value))})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 md:col-span-2",children:[(0,t.jsx)(A,{id:"sdxl_bucket_optimization",checked:e.sdxl_bucket_optimization,onCheckedChange:e=>J("sdxl_bucket_optimization",e)}),(0,t.jsx)(g,{htmlFor:"sdxl_bucket_optimization",className:"font-normal",children:"SDXL Bucket Optimization"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 md:col-span-2",children:[(0,t.jsx)(A,{id:"bucket_no_upscale",checked:e.bucket_no_upscale,onCheckedChange:e=>J("bucket_no_upscale",e)}),(0,t.jsx)(g,{htmlFor:"bucket_no_upscale",className:"font-normal",children:"No Upscale (don't upscale smaller images)"})]})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[(0,t.jsx)("h4",{className:"text-md font-medium",children:"Caption & Token Control"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"keep_tokens",children:"Keep Tokens"}),(0,t.jsx)(p,{id:"keep_tokens",type:"number",value:e.keep_tokens,onChange:e=>J("keep_tokens",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"clip_skip",children:"CLIP Skip"}),(0,t.jsx)(p,{id:"clip_skip",type:"number",value:e.clip_skip,onChange:e=>J("clip_skip",parseInt(e.target.value)),min:"1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"caption_dropout_rate",children:"Caption Dropout Rate"}),(0,t.jsx)(p,{id:"caption_dropout_rate",type:"number",value:e.caption_dropout_rate,onChange:e=>J("caption_dropout_rate",parseFloat(e.target.value)),step:"0.01",min:"0",max:"1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"caption_tag_dropout_rate",children:"Caption Tag Dropout Rate"}),(0,t.jsx)(p,{id:"caption_tag_dropout_rate",type:"number",value:e.caption_tag_dropout_rate,onChange:e=>J("caption_tag_dropout_rate",parseFloat(e.target.value)),step:"0.01",min:"0",max:"1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"caption_dropout_every_n_epochs",children:"Caption Dropout Every N Epochs"}),(0,t.jsx)(p,{id:"caption_dropout_every_n_epochs",type:"number",value:e.caption_dropout_every_n_epochs,onChange:e=>J("caption_dropout_every_n_epochs",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"enable_wildcard",checked:e.enable_wildcard,onCheckedChange:e=>J("enable_wildcard",e)}),(0,t.jsx)(g,{htmlFor:"enable_wildcard",className:"font-normal",children:"Enable Wildcard"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"keep_tokens_separator",children:"Keep Tokens Separator"}),(0,t.jsx)(p,{id:"keep_tokens_separator",value:e.keep_tokens_separator,onChange:e=>J("keep_tokens_separator",e.target.value),placeholder:"|||"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"secondary_separator",children:"Secondary Separator"}),(0,t.jsx)(p,{id:"secondary_separator",value:e.secondary_separator,onChange:e=>J("secondary_separator",e.target.value),placeholder:";;"})]})]})]})]}),(0,t.jsxs)(m.av,{value:"lora",className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"LoRA Structure"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"lora_type",children:"LoRA Type"}),(0,t.jsxs)(C,{value:e.lora_type,onValueChange:e=>J("lora_type",e),children:[(0,t.jsx)(S,{id:"lora_type",children:(0,t.jsx)(F,{})}),(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{value:"LoRA",children:"LoRA"}),(0,t.jsx)(z,{value:"LoCon",children:"LoCon"}),(0,t.jsx)(z,{value:"LoKR",children:"LoKR"}),(0,t.jsx)(z,{value:"DyLoRA",children:"DyLoRA"}),(0,t.jsx)(z,{value:"DoRA",children:"DoRA"}),(0,t.jsx)(z,{value:"LoHa",children:"LoHa"}),(0,t.jsx)(z,{value:"(IA)\xb3",children:"(IA)\xb3"}),(0,t.jsx)(z,{value:"GLoRA",children:"GLoRA"}),(0,t.jsx)(z,{value:"Native Fine-Tuning",children:"Native Fine-Tuning"}),(0,t.jsx)(z,{value:"Diag-OFT",children:"Diag-OFT"}),(0,t.jsx)(z,{value:"BOFT",children:"BOFT"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"network_module",children:"Network Module"}),(0,t.jsxs)(C,{value:e.network_module,onValueChange:e=>J("network_module",e),children:[(0,t.jsx)(S,{id:"network_module",children:(0,t.jsx)(F,{})}),(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{value:"networks.lora",children:"networks.lora"}),(0,t.jsx)(z,{value:"lycoris.kohya",children:"lycoris.kohya"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"network_dim",children:"Network Dim (Rank)"}),(0,t.jsx)(p,{id:"network_dim",type:"number",value:e.network_dim,onChange:e=>J("network_dim",parseInt(e.target.value)),min:"1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"network_alpha",children:"Network Alpha"}),(0,t.jsx)(p,{id:"network_alpha",type:"number",value:e.network_alpha,onChange:e=>J("network_alpha",parseInt(e.target.value)),min:"1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"conv_dim",children:"Conv Dim (for textures/details)"}),(0,t.jsx)(p,{id:"conv_dim",type:"number",value:e.conv_dim,onChange:e=>J("conv_dim",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"conv_alpha",children:"Conv Alpha"}),(0,t.jsx)(p,{id:"conv_alpha",type:"number",value:e.conv_alpha,onChange:e=>J("conv_alpha",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"network_dropout",children:"Network Dropout"}),(0,t.jsx)(p,{id:"network_dropout",type:"number",value:e.network_dropout,onChange:e=>J("network_dropout",parseFloat(e.target.value)),step:"0.01",min:"0",max:"1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"factor",children:"Factor (LoKR decomposition, -1=auto)"}),(0,t.jsx)(p,{id:"factor",type:"number",value:e.factor,onChange:e=>J("factor",parseInt(e.target.value))})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"dim_from_weights",checked:e.dim_from_weights,onCheckedChange:e=>J("dim_from_weights",e)}),(0,t.jsx)(g,{htmlFor:"dim_from_weights",className:"font-normal",children:"Dimension from Weights"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"train_norm",checked:e.train_norm,onCheckedChange:e=>J("train_norm",e)}),(0,t.jsx)(g,{htmlFor:"train_norm",className:"font-normal",children:"Train Norm (LyCORIS)"})]})]})]})]}),(0,t.jsxs)(m.av,{value:"learning",className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Learning Rate Configuration"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"unet_lr",children:"UNet Learning Rate"}),(0,t.jsx)(p,{id:"unet_lr",type:"number",value:e.unet_lr,onChange:e=>J("unet_lr",parseFloat(e.target.value)),step:"0.00001"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"text_encoder_lr",children:"Text Encoder Learning Rate"}),(0,t.jsx)(p,{id:"text_encoder_lr",type:"number",value:e.text_encoder_lr,onChange:e=>J("text_encoder_lr",parseFloat(e.target.value)),step:"0.00001"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"lr_scheduler",children:"LR Scheduler"}),(0,t.jsxs)(C,{value:e.lr_scheduler,onValueChange:e=>J("lr_scheduler",e),children:[(0,t.jsx)(S,{id:"lr_scheduler",children:(0,t.jsx)(F,{})}),(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{value:"cosine",children:"Cosine"}),(0,t.jsx)(z,{value:"cosine_with_restarts",children:"Cosine with Restarts"}),(0,t.jsx)(z,{value:"constant",children:"Constant"}),(0,t.jsx)(z,{value:"constant_with_warmup",children:"Constant with Warmup"}),(0,t.jsx)(z,{value:"linear",children:"Linear"}),(0,t.jsx)(z,{value:"polynomial",children:"Polynomial"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"lr_scheduler_number",children:"LR Scheduler Number (for restarts/polynomial)"}),(0,t.jsx)(p,{id:"lr_scheduler_number",type:"number",value:e.lr_scheduler_number,onChange:e=>J("lr_scheduler_number",parseInt(e.target.value)),min:"1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"lr_warmup_ratio",children:"LR Warmup Ratio"}),(0,t.jsx)(p,{id:"lr_warmup_ratio",type:"number",value:e.lr_warmup_ratio,onChange:e=>J("lr_warmup_ratio",parseFloat(e.target.value)),step:"0.01",min:"0",max:"1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"lr_warmup_steps",children:"LR Warmup Steps (0 = use ratio)"}),(0,t.jsx)(p,{id:"lr_warmup_steps",type:"number",value:e.lr_warmup_steps,onChange:e=>J("lr_warmup_steps",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"lr_power",children:"LR Power (for polynomial scheduler)"}),(0,t.jsx)(p,{id:"lr_power",type:"number",value:e.lr_power,onChange:e=>J("lr_power",parseFloat(e.target.value)),step:"0.1"})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("h4",{className:"text-md font-medium mb-3",children:"Optimizer"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"optimizer_type",children:"Optimizer Type"}),(0,t.jsxs)(C,{value:e.optimizer_type,onValueChange:e=>J("optimizer_type",e),children:[(0,t.jsx)(S,{id:"optimizer_type",children:(0,t.jsx)(F,{})}),(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{value:"AdamW8bit",children:"AdamW 8bit"}),(0,t.jsx)(z,{value:"AdamW",children:"AdamW"}),(0,t.jsx)(z,{value:"Prodigy",children:"Prodigy"}),(0,t.jsx)(z,{value:"Lion",children:"Lion"}),(0,t.jsx)(z,{value:"Lion8bit",children:"Lion 8bit"}),(0,t.jsx)(z,{value:"DAdaptation",children:"DAdaptation"}),(0,t.jsx)(z,{value:"SGDNesterov",children:"SGD Nesterov"}),(0,t.jsx)(z,{value:"SGDNesterov8bit",children:"SGD Nesterov 8bit"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"gradient_accumulation_steps",children:"Gradient Accumulation Steps"}),(0,t.jsx)(p,{id:"gradient_accumulation_steps",type:"number",value:e.gradient_accumulation_steps,onChange:e=>J("gradient_accumulation_steps",parseInt(e.target.value)),min:"1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"max_grad_norm",children:"Max Gradient Norm"}),(0,t.jsx)(p,{id:"max_grad_norm",type:"number",value:e.max_grad_norm,onChange:e=>J("max_grad_norm",parseFloat(e.target.value)),step:"0.1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"optimizer_args",children:"Optimizer Args (JSON)"}),(0,t.jsx)(p,{id:"optimizer_args",value:e.optimizer_args,onChange:e=>J("optimizer_args",e.target.value),placeholder:'{"weight_decay": 0.01}'})]})]})]})]}),(0,t.jsxs)(m.av,{value:"advanced",className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Advanced Training Techniques"}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-4",children:[(0,t.jsx)("h4",{className:"text-md font-medium",children:"SNR & Noise Control"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"min_snr_gamma_enabled",checked:e.min_snr_gamma_enabled,onCheckedChange:e=>J("min_snr_gamma_enabled",e)}),(0,t.jsx)(g,{htmlFor:"min_snr_gamma_enabled",className:"font-normal",children:"Enable Min SNR Gamma"})]}),e.min_snr_gamma_enabled&&(0,t.jsxs)("div",{className:"ml-6 space-y-2",children:[(0,t.jsx)(g,{htmlFor:"min_snr_gamma",children:"Min SNR Gamma Value"}),(0,t.jsx)(p,{id:"min_snr_gamma",type:"number",value:e.min_snr_gamma,onChange:e=>J("min_snr_gamma",parseFloat(e.target.value)),step:"0.1"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"ip_noise_gamma_enabled",checked:e.ip_noise_gamma_enabled,onCheckedChange:e=>J("ip_noise_gamma_enabled",e)}),(0,t.jsx)(g,{htmlFor:"ip_noise_gamma_enabled",className:"font-normal",children:"Enable IP Noise Gamma"})]}),e.ip_noise_gamma_enabled&&(0,t.jsxs)("div",{className:"ml-6 space-y-2",children:[(0,t.jsx)(g,{htmlFor:"ip_noise_gamma",children:"IP Noise Gamma Value"}),(0,t.jsx)(p,{id:"ip_noise_gamma",type:"number",value:e.ip_noise_gamma,onChange:e=>J("ip_noise_gamma",parseFloat(e.target.value)),step:"0.01"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"noise_offset",children:"Noise Offset"}),(0,t.jsx)(p,{id:"noise_offset",type:"number",value:e.noise_offset,onChange:e=>J("noise_offset",parseFloat(e.target.value)),step:"0.01"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"adaptive_noise_scale",children:"Adaptive Noise Scale"}),(0,t.jsx)(p,{id:"adaptive_noise_scale",type:"number",value:e.adaptive_noise_scale,onChange:e=>J("adaptive_noise_scale",parseFloat(e.target.value)),step:"0.01"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"multires_noise_discount",children:"Multires Noise Discount"}),(0,t.jsx)(p,{id:"multires_noise_discount",type:"number",value:e.multires_noise_discount,onChange:e=>J("multires_noise_discount",parseFloat(e.target.value)),step:"0.01"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"multinoise",checked:e.multinoise,onCheckedChange:e=>J("multinoise",e)}),(0,t.jsx)(g,{htmlFor:"multinoise",className:"font-normal",children:"Multi-Noise"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"zero_terminal_snr",checked:e.zero_terminal_snr,onCheckedChange:e=>J("zero_terminal_snr",e)}),(0,t.jsx)(g,{htmlFor:"zero_terminal_snr",className:"font-normal",children:"Zero Terminal SNR"})]})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-4",children:[(0,t.jsx)("h4",{className:"text-md font-medium",children:"Memory & Performance"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"gradient_checkpointing",checked:e.gradient_checkpointing,onCheckedChange:e=>J("gradient_checkpointing",e)}),(0,t.jsx)(g,{htmlFor:"gradient_checkpointing",className:"font-normal",children:"Gradient Checkpointing (saves VRAM)"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"mixed_precision",children:"Mixed Precision"}),(0,t.jsxs)(C,{value:e.mixed_precision,onValueChange:e=>J("mixed_precision",e),children:[(0,t.jsx)(S,{id:"mixed_precision",children:(0,t.jsx)(F,{})}),(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{value:"no",children:"No (FP32)"}),(0,t.jsx)(z,{value:"fp16",children:"FP16"}),(0,t.jsx)(z,{value:"bf16",children:"BF16"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"vae_batch_size",children:"VAE Batch Size"}),(0,t.jsx)(p,{id:"vae_batch_size",type:"number",value:e.vae_batch_size,onChange:e=>J("vae_batch_size",parseInt(e.target.value)),min:"1"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"full_fp16",checked:e.full_fp16,onCheckedChange:e=>J("full_fp16",e)}),(0,t.jsx)(g,{htmlFor:"full_fp16",className:"font-normal",children:"Full FP16 Training"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"no_half_vae",checked:e.no_half_vae,onCheckedChange:e=>J("no_half_vae",e)}),(0,t.jsx)(g,{htmlFor:"no_half_vae",className:"font-normal",children:"No Half VAE"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"cache_latents",checked:e.cache_latents,onCheckedChange:e=>J("cache_latents",e)}),(0,t.jsx)(g,{htmlFor:"cache_latents",className:"font-normal",children:"Cache Latents"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"cache_latents_to_disk",checked:e.cache_latents_to_disk,onCheckedChange:e=>J("cache_latents_to_disk",e)}),(0,t.jsx)(g,{htmlFor:"cache_latents_to_disk",className:"font-normal",children:"Cache Latents to Disk"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"cache_text_encoder_outputs",checked:e.cache_text_encoder_outputs,onCheckedChange:e=>J("cache_text_encoder_outputs",e)}),(0,t.jsx)(g,{htmlFor:"cache_text_encoder_outputs",className:"font-normal",children:"Cache Text Encoder Outputs"})]})]})]})]}),(0,t.jsxs)(m.av,{value:"saving",className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Saving & Checkpoints"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"save_every_n_epochs",children:"Save Every N Epochs"}),(0,t.jsx)(p,{id:"save_every_n_epochs",type:"number",value:e.save_every_n_epochs,onChange:e=>J("save_every_n_epochs",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"save_every_n_steps",children:"Save Every N Steps (0 = off)"}),(0,t.jsx)(p,{id:"save_every_n_steps",type:"number",value:e.save_every_n_steps,onChange:e=>J("save_every_n_steps",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"save_last_n_epochs",children:"Save Last N Epochs (keep only)"}),(0,t.jsx)(p,{id:"save_last_n_epochs",type:"number",value:e.save_last_n_epochs,onChange:e=>J("save_last_n_epochs",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"save_last_n_epochs_state",children:"Save Last N Epoch States (keep only)"}),(0,t.jsx)(p,{id:"save_last_n_epochs_state",type:"number",value:e.save_last_n_epochs_state,onChange:e=>J("save_last_n_epochs_state",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"save_model_as",children:"Save Model As"}),(0,t.jsxs)(C,{value:e.save_model_as,onValueChange:e=>J("save_model_as",e),children:[(0,t.jsx)(S,{id:"save_model_as",children:(0,t.jsx)(F,{})}),(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{value:"safetensors",children:"SafeTensors"}),(0,t.jsx)(z,{value:"ckpt",children:"Checkpoint (.ckpt)"}),(0,t.jsx)(z,{value:"pt",children:"PyTorch (.pt)"}),(0,t.jsx)(z,{value:"diffusers",children:"Diffusers"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"save_precision",children:"Save Precision"}),(0,t.jsxs)(C,{value:e.save_precision,onValueChange:e=>J("save_precision",e),children:[(0,t.jsx)(S,{id:"save_precision",children:(0,t.jsx)(F,{})}),(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{value:"fp16",children:"FP16"}),(0,t.jsx)(z,{value:"bf16",children:"BF16"}),(0,t.jsx)(z,{value:"float",children:"FP32"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"output_name",children:"Output Name (optional)"}),(0,t.jsx)(p,{id:"output_name",value:e.output_name,onChange:e=>J("output_name",e.target.value),placeholder:"Leave empty to use project name"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:"no_metadata",checked:e.no_metadata,onCheckedChange:e=>J("no_metadata",e)}),(0,t.jsx)(g,{htmlFor:"no_metadata",className:"font-normal",children:"No Metadata (smaller file size)"})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("h4",{className:"text-md font-medium mb-3",children:"Sample Generation"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"sample_every_n_epochs",children:"Sample Every N Epochs"}),(0,t.jsx)(p,{id:"sample_every_n_epochs",type:"number",value:e.sample_every_n_epochs,onChange:e=>J("sample_every_n_epochs",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"sample_every_n_steps",children:"Sample Every N Steps (0 = off)"}),(0,t.jsx)(p,{id:"sample_every_n_steps",type:"number",value:e.sample_every_n_steps,onChange:e=>J("sample_every_n_steps",parseInt(e.target.value)),min:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"sample_sampler",children:"Sample Sampler"}),(0,t.jsxs)(C,{value:e.sample_sampler,onValueChange:e=>J("sample_sampler",e),children:[(0,t.jsx)(S,{id:"sample_sampler",children:(0,t.jsx)(F,{})}),(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{value:"euler_a",children:"Euler A"}),(0,t.jsx)(z,{value:"euler",children:"Euler"}),(0,t.jsx)(z,{value:"ddim",children:"DDIM"}),(0,t.jsx)(z,{value:"ddpm",children:"DDPM"}),(0,t.jsx)(z,{value:"pndm",children:"PNDM"}),(0,t.jsx)(z,{value:"k_lms",children:"K-LMS"})]})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)(g,{htmlFor:"sample_prompts",children:"Sample Prompts (one per line)"}),(0,t.jsx)(P,{id:"sample_prompts",value:e.sample_prompts,onChange:e=>J("sample_prompts",e.target.value),rows:4,placeholder:"a cat sitting on a chair a dog running in a field an astronaut riding a horse"})]})]})]})]}),(0,t.jsxs)(m.av,{value:"logging",className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Logging & Monitoring"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)(g,{htmlFor:"logging_dir",children:"Logging Directory (optional)"}),(0,t.jsx)(p,{id:"logging_dir",value:e.logging_dir,onChange:e=>J("logging_dir",e.target.value),placeholder:"/workspace/logs"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"log_with",children:"Log With"}),(0,t.jsxs)(C,{value:e.log_with||"",onValueChange:e=>J("log_with",e),children:[(0,t.jsx)(S,{id:"log_with",children:(0,t.jsx)(F,{placeholder:"None"})}),(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{value:"",children:"None"}),(0,t.jsx)(z,{value:"tensorboard",children:"TensorBoard"}),(0,t.jsx)(z,{value:"wandb",children:"Weights & Biases"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g,{htmlFor:"log_prefix",children:"Log Prefix (optional)"}),(0,t.jsx)(p,{id:"log_prefix",value:e.log_prefix,onChange:e=>J("log_prefix",e.target.value),placeholder:"my_experiment"})]})]}),(0,t.jsxs)(O,{children:[(0,t.jsx)(E,{children:"Logging Tips"}),(0,t.jsx)(M,{children:(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[(0,t.jsx)("li",{children:"TensorBoard: View training metrics locally"}),(0,t.jsx)("li",{children:"WandB: Cloud-based experiment tracking with visualization"}),(0,t.jsx)("li",{children:"Log Prefix: Helps organize multiple experiments"})]})})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsxs)(v.$,{onClick:$,disabled:x,className:"flex-1",size:"lg",children:[(0,t.jsx)(c.A,{className:"w-5 h-5 mr-2"}),x?"Starting...":"Start Training"]}),(0,t.jsxs)(v.$,{onClick:G,disabled:x,variant:"outline",size:"lg",children:[(0,t.jsx)(d.A,{className:"w-5 h-5 mr-2"}),"Save Config"]})]})]}),(0,t.jsx)(ei,{open:null!==I.field,onOpenChange:e=>{e||V({field:null,mode:"directory",title:"",description:""})},onSelect:e=>{I.field&&J(I.field,e)},mode:I.mode,title:I.title,description:I.description,startPath:"/workspace"})]})}},5016:(e,a,s)=>{"use strict";s.d(a,{cn:()=>r});var t=s(2821),n=s(5889);function r(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,n.QP)((0,t.$)(a))}},6137:(e,a,s)=>{Promise.resolve().then(s.bind(s,3731)),Promise.resolve().then(s.bind(s,3649)),Promise.resolve().then(s.t.bind(s,2619,23))},7003:(e,a,s)=>{"use strict";s.d(a,{$:()=>o});var t=s(5155);s(2115);var n=s(2467),r=s(3101),l=s(5016);let i=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:a,variant:s,size:r,asChild:o=!1,...c}=e,d=o?n.DX:"button";return(0,t.jsx)(d,{"data-slot":"button",className:(0,l.cn)(i({variant:s,size:r,className:a})),...c})}},7621:(e,a,s)=>{"use strict";s.d(a,{BO:()=>d,Dp:()=>i,Zq:()=>l,jp:()=>r,t_:()=>c,vt:()=>o});let t=s(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api";async function n(e){if(!e.ok)throw Error((await e.json().catch(()=>({detail:"Unknown error"}))).detail||"HTTP ".concat(e.status));return e.json()}let r={list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/workspace";return n(await fetch("".concat(t,"/files/list?path=").concat(encodeURIComponent(e))))},upload:async(e,a)=>{let s=new FormData;return s.append("file",e),n(await fetch("".concat(t,"/files/upload?destination=").concat(encodeURIComponent(a)),{method:"POST",body:s}))},delete:async e=>n(await fetch("".concat(t,"/files/delete?path=").concat(encodeURIComponent(e)),{method:"DELETE"})),rename:async(e,a)=>n(await fetch("".concat(t,"/files/rename"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({old_path:e,new_name:a})})),mkdir:async(e,a)=>n(await fetch("".concat(t,"/files/mkdir"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,name:a})})),read:async e=>n(await fetch("".concat(t,"/files/read/").concat(encodeURIComponent(e.substring(1))))),write:async(e,a)=>n(await fetch("".concat(t,"/files/write"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,content:a})}))},l={list:async()=>n(await fetch("".concat(t,"/dataset/list"))),uploadBatch:async(e,a)=>{let s=new FormData;return e.forEach(e=>s.append("files",e)),n(await fetch("".concat(t,"/dataset/upload-batch?dataset_name=").concat(encodeURIComponent(a)),{method:"POST",body:s}))},tag:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wd14-vit-v2",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.35;return n(await fetch("".concat(t,"/dataset/tag"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset_path:e,model:a,threshold:s})}))},create:async e=>n(await fetch("".concat(t,"/dataset/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})})),getImagesWithTags:async e=>n(await fetch("".concat(t,"/dataset/images-with-tags?dataset_path=").concat(encodeURIComponent(e)))),updateTags:async(e,a)=>n(await fetch("".concat(t,"/dataset/update-tags"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_path:e,tags:a})})),bulkTagOperation:async(e,a,s,r)=>n(await fetch("".concat(t,"/dataset/bulk-tag-operation"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset_path:e,operation:a,tags:s,replace_with:r||""})})),injectTriggerWord:async function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start";return n(await fetch("".concat(t,"/dataset/inject-trigger-word"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset_path:e,trigger_word:a,position:s})}))}},i={start:async e=>n(await fetch("".concat(t,"/training/start"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),stop:async()=>n(await fetch("".concat(t,"/training/stop"),{method:"POST"})),status:async()=>n(await fetch("".concat(t,"/training/status"))),validate:async e=>n(await fetch("".concat(t,"/training/validate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),connectLogs:(e,a)=>{let s=new WebSocket("ws://localhost:8000/api/training/logs");return s.onmessage=a=>{e(JSON.parse(a.data))},a&&(s.onerror=a),s}},o={templates:async()=>n(await fetch("".concat(t,"/config/templates"))),load:async e=>n(await fetch("".concat(t,"/config/load?path=").concat(encodeURIComponent(e)))),save:async(e,a)=>n(await fetch("".concat(t,"/config/save"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,config:a})})),defaults:async()=>n(await fetch("".concat(t,"/config/defaults")))},c={calculateSteps:async e=>n(await fetch("".concat(t,"/utilities/calculator"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),browseDatasets:async()=>n(await fetch("".concat(t,"/utilities/datasets/browse"))),listLoraFiles:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"safetensors",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name";return n(await fetch("".concat(t,"/utilities/lora/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directory:e,file_extension:a,sort_by:s})}))},getResizeDimensions:async()=>n(await fetch("".concat(t,"/utilities/lora/resize-dimensions"))),resizeLora:async(e,a,s,r)=>n(await fetch("".concat(t,"/utilities/lora/resize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input_path:e,output_path:a,new_dim:s,new_alpha:r})})),uploadToHuggingFace:async e=>n(await fetch("".concat(t,"/utilities/hf/upload"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),validateHfToken:async e=>n(await fetch("".concat(t,"/utilities/hf/validate-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hf_token:e})}))},d={download:async(e,a,s)=>n(await fetch("".concat(t,"/models/download"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,download_type:a,model_type:s})})),list:async()=>n(await fetch("".concat(t,"/models/list"))),delete:async(e,a)=>n(await fetch("".concat(t,"/models/").concat(e,"/").concat(encodeURIComponent(a)),{method:"DELETE"})),popular:async()=>n(await fetch("".concat(t,"/models/popular")))}}},e=>{e.O(0,[105,297,909,342,193,661,809,441,255,358],()=>e(e.s=6137)),_N_E=e.O()}]);